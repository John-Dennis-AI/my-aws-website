<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>John Dennis — Data Science & AI/ML Portfolio</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root {
      --bg: #0b1220;
      --panel: #111a2e;
      --text: #e9f0ff;
      --muted: #b8c3e0;
      --accent: #79d2ff;
      --accent-2: #a0ffcf;
      --radius: 18px;
      --shadow: 0 10px 30px rgba(0, 0, 0, .35);
      --maxw: 1100px;
      /* NEW: responsive sidebar width */
      --navw: clamp(220px, 26vw, 240px);
    }

    html { scroll-behavior: smooth; }

    /* ===== Mobile-first defaults ===== */
    body {
      margin: 0;
      font-family: Inter, sans-serif;
      color: var(--text);
      background: var(--bg);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      padding-left: 0; /* mobile & narrow: no reserved space */
    }
    a { color: var(--accent); text-decoration: none }

    /* Sidebar (off-canvas by default) */
    .sidenav {
      position: fixed; left: 0; top: 0; bottom: 0; width: var(--navw); /* ← uses var */
      background: rgba(11, 18, 32, .92);
      border-right: 1px solid rgba(255, 255, 255, .06);
      backdrop-filter: blur(10px);
      padding: 22px 16px; z-index: 1000;
      display: flex; flex-direction: column;
      transform: translateX(-100%);         /* hidden by default */
      transition: transform .2s ease;
    }
    .sidenav.open { transform: translateX(0); }

    .side-top { display: flex; flex-direction: column; gap: 12px; }
    .side-bottom { margin-top: auto; }

    .sidenav .brand {
      font-weight: 800;
      margin-bottom: 4px;
      margin-left: 60px; /* nudges "Portfolio" right of the hamburger */
    }
    .sidenav nav { display: flex; flex-direction: column; gap: 12px; }
    .sidenav a { color: var(--text); padding: 10px 12px; border-radius: 10px; }
    .sidenav a:hover { background: rgba(255, 255, 255, .08); }
    .sidenav a.active { background: rgba(255,255,255,.15); font-weight: 700; }
    .sidenav hr { border: none; border-top: 1px solid rgba(255,255,255,0.1); margin: 18px 0; }

    .sidenav .site-note-lead { font-size: 1.1em; line-height: 1.35; color: var(--muted); margin: 10px 0 6px; }
    .sidenav .site-tools { margin: 0 0 0 1em; padding-left: 1em; color: var(--muted); }
    .sidenav .site-tools li { font-size: 0.9em; line-height: 1.4; margin: 4px 0; }

    .container { max-width: var(--maxw); margin: 0 auto; padding: 0 20px; }

    /* Hamburger + backdrop (ALWAYS visible; also on desktop) */
    .menu-toggle{
      position: fixed;
      left: 12px; top: 12px;
      display: inline-flex;
      align-items: center; justify-content: center;
      width: 44px; height: 44px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(17,26,46,.85);
      color: var(--text);
      z-index: 1100;
      backdrop-filter: blur(8px);
      cursor: pointer;
    }
    .menu-toggle i{ font-size: 1.25rem; }

    .backdrop{
      position: fixed; inset: 0; 
      background: rgba(0,0,0,.4); 
      display: none; 
      z-index: 900;
    }
    .backdrop.show{ display:block; }
    .noscroll{ overflow: hidden; }

    /* Hero */
    .hero {
      position: relative; overflow: hidden; min-height: 72vh;
      display: grid; align-content: start;
      padding-top: 80px;
    }

    .sky {
      background:
        radial-gradient(1200px 700px at 70% -10%, #1c2c5c 0%, rgba(11, 18, 32, 0) 60%),
        radial-gradient(1000px 600px at 20% -20%, #13274b 0%, rgba(11, 18, 32, 0) 60%),
        var(--bg);
      position: absolute; inset: 0; z-index: 0;
    }

    .milkyway {
      position: absolute; inset: -20% -10%;
      transform: rotate(-18deg) translateY(-2%);
      z-index: 1; pointer-events: none;
      background:
        radial-gradient(ellipse 70% 130% at 55% 45%, rgba(210,225,255,0.14) 0%, rgba(210,225,255,0.08) 35%, rgba(20,30,60,0) 70%),
        radial-gradient(ellipse 55% 90%  at 45% 55%, rgba(180,200,255,0.12) 0%, rgba(180,200,255,0.06) 40%, rgba(20,30,60,0) 72%),
        radial-gradient(ellipse 40% 65%  at 60% 40%, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0.00) 70%);
      filter: blur(12px); opacity: .55;
      -webkit-mask-image: linear-gradient(90deg, transparent 0%, black 18%, black 82%, transparent 100%);
              mask-image: linear-gradient(90deg, transparent 0%, black 18%, black 82%, transparent 100%);
    }
    .milkyway::after {
      content: ""; position: absolute; inset: 0;
      background-image: url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120">\
<circle cx="12" cy="22" r="0.35" fill="white" opacity="0.35"/>\
<circle cx="60" cy="18" r="0.25" fill="white" opacity="0.26"/>\
<circle cx="90" cy="40" r="0.3"  fill="white" opacity="0.28"/>\
<circle cx="30" cy="70" r="0.22" fill="white" opacity="0.24"/>\
<circle cx="78" cy="96" r="0.26" fill="white" opacity="0.22"/>\
<circle cx="8"  cy="88" r="0.2"  fill="white" opacity="0.22"/>\
</svg>');
      background-size: 80px 80px; mix-blend-mode: screen; opacity: .28; filter: blur(.2px);
      -webkit-mask-image: linear-gradient(90deg, transparent 0%, black 20%, black 80%, transparent 100%);
              mask-image: linear-gradient(90deg, transparent 0%, black 20%, black 80%, transparent 100%);
    }

    /* Stars (horizon fade) */
    .stars1,.stars2,.stars3 {
      position: absolute; inset: 0; background-repeat: repeat; background-size: auto;
      pointer-events: none; z-index: 2; will-change: background-position; transform: translateZ(0);
      animation-timing-function: linear;
      -webkit-mask-image: linear-gradient(to top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 45%);
              mask-image: linear-gradient(to top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 45%);
    }
    .stars1 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="56" height="56"><circle cx="10" cy="20" r="0.8" fill="white" opacity="0.95"/><circle cx="40" cy="10" r="0.9" fill="white" opacity="0.85"/><circle cx="28" cy="46" r="0.7" fill="white" opacity="0.9"/></svg>'); animation: move1 120s linear infinite; opacity: 1; }
    .stars2 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80"><circle cx="32" cy="56" r="0.9" fill="white" opacity="0.9"/><circle cx="64" cy="24" r="0.7" fill="white" opacity="0.9"/><circle cx="12" cy="16" r="1.0" fill="white" opacity="0.85"/></svg>'); animation: move2 170s linear infinite; opacity: .92; }
    .stars3 { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><circle cx="82" cy="20" r="0.8" fill="white" opacity="0.88"/><circle cx="38" cy="80" r="0.7" fill="white" opacity="0.86"/><circle cx="16" cy="44" r="0.9" fill="white" opacity="0.88"/></svg>'); animation: move3 210s linear infinite; opacity: .86; }
    @keyframes move1 { from { background-position: 0 0; } to { background-position: -4200px 0; } }
    @keyframes move2 { from { background-position: 0 0; } to { background-position: -3600px 0; } }
    @keyframes move3 { from { background-position: 0 0; } to { background-position: -3000px 0; } }
    @media (prefers-reduced-motion: reduce) { .stars1,.stars2,.stars3 { animation: none; } }

    /* Mountains */
    .mountains { position: absolute; bottom: 0; left: 0; width: 100%; height: 26vh; pointer-events: none; z-index: 3; }
    .mountains .snowcap {
      fill: #ffffff; stroke: rgba(255,255,255,0.95); stroke-width: 3;
      filter: drop-shadow(0 1px 4px rgba(255,255,255,0.5));
    }
    .mountains .mid { fill: #4d6fa9; }
    .mountains .front { fill: #6f8fbc; }

    .headline { font-size: clamp(32px, 5vw, 56px); line-height: 1.05; font-weight: 500; margin: 0; z-index: 4; position: relative; text-wrap: balance; }
    .headline-line { border: none; height: 1px; background: linear-gradient(to right, var(--accent), transparent); width: 60%; margin: 16px 0; }
    .headline .subline { display: block; font-size: 0.7em; font-weight: 400; line-height: 1.4; color: var(--muted); }
    .headline .subline + .subline { margin-top: 14px; }

    .hero-content { position: relative; z-index: 4; padding: 24px 0 240px; }

    section { padding: 70px 0; }
    .grid { display: grid; gap: 20px; }
    @media (min-width:700px){.grid{grid-template-columns: repeat(2, 1fr);}}
    @media (min-width:1024px){.grid{grid-template-columns: repeat(3, 1fr);}}

    /* Cards */
    .card {
      display: flex; flex-direction: column; background: var(--panel);
      border: 1px solid rgba(255,255,255,.06); border-radius: var(--radius);
      box-shadow: var(--shadow); overflow: hidden; color: var(--text);
      transition: transform .12s ease, border-color .12s ease;
    }
    .card:hover { transform: translateY(-2px); border-color: rgba(255,255,255,.18); }
    .thumb { aspect-ratio: 16/9; background:#0c1428; }
    .thumb img { width:100%; height:100%; object-fit:cover; display:block; cursor: zoom-in; }

    .card-body { padding:16px; }
    .tags { display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 14px; }
    .tag { font-size:12px; padding:4px 8px; border:1px solid rgba(255,255,255,.12); border-radius:999px; color:var(--muted); }
    .card h3 { margin:0 0 6px; font-size:18px; }
    .card p { margin:0 0 14px; color:var(--muted); }

    /* About */
    .about { display:grid; gap:24px; align-items:center; }
    @media (min-width:860px){.about{grid-template-columns: 260px 1fr;}}
    .avatar { width:240px; height:240px; border-radius:50%; overflow:hidden; border:3px solid rgba(255,255,255,.18); box-shadow:var(--shadow); }
    .avatar img { width: 100%; height: 100%; object-fit: contain; object-position: center; background-color: var(--bg); transform: scale(1.4); transition: transform 0.3s; }
    .about p { color:var(--muted); }
    .highlights li { position: relative; padding-left: 1.6em; margin-bottom: 8px; color: var(--muted); line-height: 1.5; font-size: 1.5em; }
    .sublist { list-style-type: disc; margin-top: 6px; margin-bottom: 12px; margin-left: 1.8em; padding-left: 0.6em; color:var(--muted); font-size: 0.65em; line-height: 1.4; }
    .sublist li { margin-bottom: 3px; }

    /* Contact */
    .contact p { color: var(--muted); }
    .contact-grid { display: flex; justify-content: center; flex-wrap: wrap; gap: 48px; margin-top: 40px; }
    .contact-item { display: flex; flex-direction: column; align-items: center; color: var(--text); text-decoration: none; transition: transform 0.2s ease, color 0.2s ease; }
    .contact-item i { font-size: 3rem; margin-bottom: 10px; color: var(--muted); }
    .contact-item span { font-size: 1.1em; color: var(--muted); }
    .contact-item:hover { transform: scale(1.08); }
    .contact-item:hover i, .contact-item:hover span { color: var(--accent); }

    /* Lightbox */
    .lightbox {
      position: fixed; inset: 0; background: rgba(0,0,0,0.85);
      display: none; align-items: center; justify-content: center;
      z-index: 2000;
    }
    .lightbox.show { display: flex; }
    .lightbox img {
      max-width: 90vw; max-height: 85vh; border-radius: 12px; box-shadow: var(--shadow);
    }

    /* ===== Desktop-wide: pin sidebar (no overlap) ===== */
    @media (min-width: 1100px){
      body{ padding-left: var(--navw); }     /* reserve space equal to sidebar */
      .sidenav{ transform: translateX(0); }  /* keep visible */
      .backdrop{ display: none !important; } /* no backdrop on wide desktop */

      /* Optional: allow collapsing sidebar with hamburger on desktop */
      body.nav-collapsed { padding-left: 0; }
      body.nav-collapsed .sidenav { transform: translateX(-100%); }

      .hero{ padding-top: 80px; }
    }

    /* Narrow desktop & tablet (<1100px): overlay drawer behavior (no padding-left) */
    @media (max-width: 1099.98px){
      body { padding-left: 0; }
      .sidenav { transform: translateX(-100%); } /* hidden until opened */
    }
  </style>
</head>

<body>
  <noscript><div style="padding:12px;background:#222;border-bottom:1px solid rgba(255,255,255,.15);color:#fff">JavaScript is disabled — navigation drawer and image lightbox won’t work, but content is below.</div></noscript>

  <!-- Hamburger + backdrop -->
  <button class="menu-toggle" aria-label="Open navigation">
    <i class="fa-solid fa-bars"></i>
  </button>
  <div class="backdrop" aria-hidden="true"></div>

  <aside class="sidenav" aria-label="Site navigation">
    <!-- TOP block -->
    <div class="side-top">
      <div class="brand">Portfolio</div>
      <nav>
        <a href="#top">Top</a>
        <a href="#about">About Me</a>
        <a href="#projects">My Projects</a>
        <a href="#contact">Contact Me</a>
      </nav>
      <hr>
    </div>

    <!-- BOTTOM block -->
    <div class="side-bottom">
      <p class="site-note-lead">
        Built on GitHub and deployed through AWS CI/CD pipelines using the following cloud services:
      </p>
      <ul class="site-tools">
        <li>Route&nbsp;53</li>
        <li>CloudFront</li>
        <li>Cloud9</li>
        <li>CodePipeline</li>
        <li>CodeBuild</li>
        <li>IAM</li>
        <li>S3</li>
        <li>Lambda</li>
        <li>CloudWatch</li>
      </ul>
    </div>
  </aside>

  <!-- HERO -->
  <header id="top" class="hero" aria-label="Intro">
    <div class="sky"></div>
    <div class="milkyway"></div>
    <div class="stars1"></div>
    <div class="stars2"></div>
    <div class="stars3"></div>

    <!-- Mountains -->
    <svg class="mountains" viewBox="0 0 1440 400" preserveAspectRatio="none" aria-hidden="true">
      <path class="snowcap" d="M0 200 L200 100 L340 180 L520 90 L700 150 L860 80 L1040 170 L1220 120 L1440 190 L1440 400 L0 400 Z"/>
      <path class="mid"     d="M0 260 L200 160 L340 240 L520 130 L700 210 L860 120 L1040 220 L1220 170 L1440 250 L1440 400 L0 400 Z"/>
      <path class="front"   d="M0 300 L180 220 L360 300 L520 210 L700 270 L860 220 L1040 300 L1220 260 L1440 310 L1440 400 L0 400 Z"/>
    </svg>

    <div class="container hero-content">
      <h1 class="headline">
        Hi, I'm John Dennis!
        <hr class="headline-line">
        <span class="subline">
          I develop Data Science, AI, and Machine Learning models, specializing in <strong>RAG</strong>, <strong>Agentic</strong>, and <strong>Multimodal</strong> systems.
        </span>
        <span class="subline">
          Scroll down to explore my cloud-based and standalone AI/ML projects...
        </span>
      </h1>
    </div>
  </header>

  <!-- ABOUT -->
  <section id="about" class="container" aria-label="About Me">
    <h2>About Me</h2>
    <div class="about">
      <div class="avatar">
        <img src="assets/img/headshot.jpg" alt="John Dennis headshot" />
      </div>
      <div>
        <p style="font-size: 2em;">A quick overview of my background and skills...</p>
        <ul class="highlights">
          <li><strong>Education</strong>
            <ul class="sublist">
              <li>M.S., Computer Science &amp; Engineering</li>
              <li>B.S., Electrical Engineering</li>
            </ul>
          </li>
          <li><strong>Certifications</strong>
            <ul class="sublist">
              <li>AWS Certified AI Practitioner</li>
              <li>AWS Certified Cloud Practitioner</li>
              <li>Databricks Generative AI Accreditation</li>
            </ul>
          </li>
          <li><strong>Leadership &amp; Community</strong>
            <ul class="sublist">
              <li>AWS Customer Council Member</li>
              <li>AI/ML Bootcamp Instructor &amp; Curriculum Developer</li>
            </ul>
          </li>
          <li><strong>Technical Skills</strong>
            <ul class="sublist">
              <li>Python and SQL</li>
              <li>ML and Data Engineering Pipelines</li>
              <li>Software Engineering Practices (SDLC)</li>
            </ul>
          </li>
        </ul>
        <p style="font-size: 2em;">I’m skilled at bridging the gap between technical and non-technical audiences so decisions are clear and aligned.</p>
      </div>
    </div>
  </section>

  <!-- PROJECTS -->
  <main id="projects" class="container" aria-label="My Projects">
    <h2>My Projects</h2>
    <div class="grid">
      <article class="card" aria-label="Agent/RAG Customer Chatbot">
        <div class="thumb"><img src="assets/img/agent-rag.jpg" alt="Agent/RAG Customer Chatbot thumbnail"></div>
        <div class="card-body">
          <h3>Agent/RAG Customer Chatbot</h3>
          <div class="tags">
            <span class="tag">LangChain</span>
            <span class="tag">FAISS</span>
            <span class="tag">Hugging Face</span>
            <span class="tag">OpenAI</span>
          </div>
          <p>AI-powered customer chatbot for a home improvement company using an LLM agent that directs users to the right RAG system for either kitchen remodeling advice or store policy questions. The agent decides which RAG tool is best-suited to answer the query.</p>
        </div>
      </article>

      <article class="card" aria-label="Multi-Tool LangChain Agent">
        <div class="thumb"><img src="assets/img/multi-tool.jpg" alt="Multi-Tool LangChain Agent thumbnail"></div>
        <div class="card-body">
          <h3>Multi-Tool LangChain Agent</h3>
          <div class="tags">
            <span class="tag">LangChain</span>
            <span class="tag">OpenAI</span>
            <span class="tag">llm-math</span>
            <span class="tag">Multi-tool</span>
          </div>
          <p>This is a multi-tool agent framework built with LangChain and OpenAI’s LLM. The agent chooses between four integrated tools: Wikipedia for factual recall, llm-math for computation, ddg-search for real-time web data, and arXiv for scholarly research.</p>
        </div>
      </article>

      <article class="card" aria-label="Hungry Bot Fast Food Chatbot">
        <div class="thumb"><img src="assets/img/hungry-bot.jpg" alt="Hungry Bot Fast Food Chatbot thumbnail"></div>
        <div class="card-body">
          <h3>Hungry Bot Fast Food Chatbot</h3>
          <div class="tags">
            <span class="tag">torchaudio</span>
            <span class="tag">gTTS</span>
            <span class="tag">Whisper</span>
            <span class="tag">Hugging Face</span>
          </div>
          <p>The Hungry Bot Fast Food Chatbot is a speech-enabled ordering system that combines speech-to-text (STT), text-to-speech (TTS), and rule-based logic to handle customer orders. It listens to a customer's order, applies rules, and confirms the order verbally.</p>
        </div>
      </article>

      <article class="card" aria-label="AWS Customer Support Agent">
        <div class="thumb"><img src="assets/img/aws-agent.jpg" alt="AWS Customer Support Agent thumbnail"></div>
        <div class="card-body">
          <h3>AWS Customer Support Agent</h3>
          <div class="tags">
            <span class="tag">AWS</span>
            <span class="tag">Bedrock</span>
            <span class="tag">Lambda</span>
            <span class="tag">Claude Haiku</span>
          </div>
          <p>The AWS Support Triage Agent, built with Amazon Bedrock, intelligently routes customer inquiries to the right support domain. It classifies questions — such as product troubleshooting, billing, or policy — and retrieves relevant information from an S3 knowledge base.</p>
        </div>
      </article>

      <article class="card" aria-label="AWS News Digest Summarizer">
        <div class="thumb"><img src="assets/img/aws-news.jpg" alt="AWS News Digest Summarizer thumbnail"></div>
        <div class="card-body">
          <h3>AWS News Digest Summarizer</h3>
          <div class="tags">
            <span class="tag">AWS</span>
            <span class="tag">Bedrock</span>
            <span class="tag">SNS</span>
            <span class="tag">Claude Haiku</span>
          </div>
          <p>The AWS News Digest Summarizer automatically gathers top headlines from multiple RSS feeds each morning, summarizes them using Bedrock, and stores the results in S3. The results are emailed using SNS, creating a fully serverless daily news pipeline.</p>
        </div>
      </article>
      
      <article class="card" aria-label="AWS Multimodal Health Scan">
        <div class="thumb"><img src="assets/img/health-scan.jpg" alt="AWS Multimodal Health Scan thumbnail"></div>
        <div class="card-body">
          <h3>AWS Multimodal Health Scan</h3>
          <div class="tags">
            <span class="tag">AWS</span>
            <span class="tag">SageMaker</span>
            <span class="tag">Transcribe</span>
            <span class="tag">Polly</span>
          </div>
          <p>HealthScan AI is a multimodal voice-and-vision system built on AWS that listens to a user’s question, analyzes a skin image using a SageMaker model, and speaks back an explanation with confidence scores — showcasing intelligent audio, visual, and language integration.</p>
        </div>
      </article>
    </div>
  </main>

  <!-- CONTACT -->
  <section id="contact" class="container contact" aria-label="Contact Me">
    <h2>Contact Me</h2>
    <p>Please reach out, I'd like to connect!</p>
    <div class="contact-grid">
      <a href="mailto:johnmartindennis@gmail.com" class="contact-item" aria-label="Email">
        <i class="fa-solid fa-envelope"></i>
        <span>Email</span>
      </a>
      <a href="https://www.linkedin.com/in/john-dennis-ai" target="_blank" rel="noopener" class="contact-item" aria-label="LinkedIn">
        <i class="fa-brands fa-linkedin"></i>
        <span>LinkedIn</span>
      </a>
      <a href="https://github.com/John-Dennis-AI" target="_blank" rel="noopener" class="contact-item" aria-label="GitHub">
        <i class="fa-brands fa-github"></i>
        <span>GitHub</span>
      </a>
      <a href="assets/pdf/john-dennis-resume.pdf" download class="contact-item" aria-label="Download Resume">
        <i class="fa-solid fa-file-arrow-down"></i>
        <span>Résumé</span>
      </a>
    </div>
  </section>

  <!-- LIGHTBOX OVERLAY -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Image preview">
    <img id="lightbox-img" alt="">
  </div>

  <!-- FOOTER -->
  <footer class="container" role="contentinfo">
    <p>© <span id="year"></span> John Dennis. All rights reserved.</p>
  </footer>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Active link highlighting
    const navLinks = Array.from(document.querySelectorAll('.sidenav nav a'));
    const sections = navLinks.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
    const byId = Object.fromEntries(navLinks.map(a => [a.getAttribute('href'), a]));

    function setActive(hash) {
      navLinks.forEach(l => l.classList.toggle('active', l.getAttribute('href') === hash));
    }

    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        const id = '#' + entry.target.id;
        if (byId[id]) setActive(id);
      });
    }, { root: null, rootMargin: '-40% 0px -40% 0px', threshold: 0.1 });

    sections.forEach(sec => io.observe(sec));

    // Immediate highlight on click
    navLinks.forEach(link => {
      link.addEventListener('click', () => setActive(link.getAttribute('href')));
    });

    // Force-highlight Contact at true bottom of page
    window.addEventListener('scroll', () => {
      const scrollBottom = window.scrollY + window.innerHeight;
      const docHeight = document.documentElement.scrollHeight;
      if (docHeight - scrollBottom <= 2) setActive('#contact');
    });

    // Simple lightbox for project images
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    document.querySelectorAll('.thumb img').forEach(img => {
      img.addEventListener('click', () => {
        lightboxImg.src = img.src;
        lightbox.classList.add('show');
      });
    });
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox || e.target === lightboxImg) {
        lightbox.classList.remove('show');
        lightboxImg.src = '';
      }
    });
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        lightbox.classList.remove('show');
        lightboxImg.src = '';
      }
    });

    // ===== Mobile/desktop drawer logic (updated, 1100px breakpoint) =====
    const toggleBtn = document.querySelector('.menu-toggle');
    const sidenav   = document.querySelector('.sidenav');
    const backdrop  = document.querySelector('.backdrop');
    const mqDesktop = window.matchMedia('(min-width: 1100px)'); // ← synced with CSS

    // Ensure sensible defaults when crossing breakpoints
    function applyBreakpointDefaults(e){
      if (e.matches) {
        // Desktop-wide: show the sidebar, no backdrop, no scroll lock
        document.body.classList.remove('noscroll');
        backdrop.classList.remove('show');
        sidenav.classList.add('open');                 // keep class for consistency
        document.body.classList.remove('nav-collapsed'); // default expanded
      } else {
        // Narrow/mobile: sidebar closed initially
        sidenav.classList.remove('open');
        document.body.classList.remove('nav-collapsed');
      }
    }
    applyBreakpointDefaults(mqDesktop);
    mqDesktop.addEventListener('change', applyBreakpointDefaults);

    function closeNavMobile(){
      sidenav.classList.remove('open');
      backdrop.classList.remove('show');
      document.body.classList.remove('noscroll');
    }

    toggleBtn.addEventListener('click', () => {
      if (mqDesktop.matches) {
        // Desktop-wide: collapse/expand by toggling body padding + translateX
        document.body.classList.toggle('nav-collapsed');
      } else {
        // Narrow/mobile: classic drawer open/close
        const opening = !sidenav.classList.contains('open');
        sidenav.classList.toggle('open', opening);
        backdrop.classList.toggle('show', opening);
        document.body.classList.toggle('noscroll', opening);
      }
    });

    // Backdrop only used on narrow/mobile
    backdrop.addEventListener('click', closeNavMobile);

    // Optional: close mobile drawer after selecting a link
    document.querySelectorAll('.sidenav a').forEach(a => {
      a.addEventListener('click', () => {
        if (!mqDesktop.matches) closeNavMobile();
      });
    });
  </script>
</body>
</html>
